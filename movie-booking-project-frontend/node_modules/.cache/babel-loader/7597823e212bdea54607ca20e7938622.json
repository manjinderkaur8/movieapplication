{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jasvinder Kaur\\\\OneDrive\\\\Desktop\\\\final\\\\movie-booking-project\\\\movie-booking-project-frontend\\\\src\\\\components\\\\Auth\\\\Admin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { sendAdminAuthRequest, getAllMovies, deleteMovie } from \"../../api-helpers/api-helpers\";\nimport { adminActions } from \"../../store\";\nimport AuthForm from \"./AuthForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Admin = () => {\n  _s();\n\n  const [movies, setMovies] = useState([]);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    getAllMovies().then(data => setMovies(data.movies)) // Assuming the response has a `movies` property\n    .catch(err => console.log(err));\n  }, []);\n\n  const onResReceived = data => {\n    console.log(data);\n    dispatch(adminActions.login());\n    localStorage.setItem(\"adminId\", data.id);\n    localStorage.setItem(\"token\", data.token);\n    navigate(\"/\");\n  };\n\n  const getData = data => {\n    console.log(\"Admin\", data);\n    sendAdminAuthRequest(data.inputs).then(onResReceived).catch(err => console.log(err));\n  };\n\n  const handleDelete = id => {\n    deleteMovie(id).then(() => setMovies(prevMovies => prevMovies.filter(movie => movie._id !== id))) // Assuming movie objects have an `_id` property\n    .catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(AuthForm, {\n      onSubmit: getData,\n      isAdmin: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Added Movies\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: movies.map(movie => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [movie.title, /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => handleDelete(movie._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this)]\n      }, movie._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Admin, \"ooXAnjCNEz6BZFsR0a5wvieJZpQ=\", false, function () {\n  return [useNavigate, useDispatch];\n});\n\n_c = Admin;\nexport default Admin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useNavigate","sendAdminAuthRequest","getAllMovies","deleteMovie","adminActions","AuthForm","Admin","movies","setMovies","navigate","dispatch","then","data","catch","err","console","log","onResReceived","login","localStorage","setItem","id","token","getData","inputs","handleDelete","prevMovies","filter","movie","_id","map","title"],"sources":["C:/Users/Jasvinder Kaur/OneDrive/Desktop/final/movie-booking-project/movie-booking-project-frontend/src/components/Auth/Admin.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { sendAdminAuthRequest, getAllMovies, deleteMovie } from \"../../api-helpers/api-helpers\";\nimport { adminActions } from \"../../store\";\nimport AuthForm from \"./AuthForm\";\n\nconst Admin = () => {\n  const [movies, setMovies] = useState([]);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    getAllMovies()\n      .then((data) => setMovies(data.movies)) // Assuming the response has a `movies` property\n      .catch((err) => console.log(err));\n  }, []);\n\n  const onResReceived = (data) => {\n    console.log(data);\n    dispatch(adminActions.login());\n    localStorage.setItem(\"adminId\", data.id);\n    localStorage.setItem(\"token\", data.token);\n    navigate(\"/\");\n  };\n\n  const getData = (data) => {\n    console.log(\"Admin\", data);\n    sendAdminAuthRequest(data.inputs)\n      .then(onResReceived)\n      .catch((err) => console.log(err));\n  };\n\n  const handleDelete = (id) => {\n    deleteMovie(id)\n      .then(() => setMovies((prevMovies) => prevMovies.filter((movie) => movie._id !== id))) // Assuming movie objects have an `_id` property\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <div>\n      <AuthForm onSubmit={getData} isAdmin={true} />\n      <h2>Added Movies</h2>\n      <ul>\n        {movies.map((movie) => (\n          <li key={movie._id}>\n            {movie.title}\n            <button className=\"btn btn-primary\" onClick={() => handleDelete(movie._id)}>Delete</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Admin;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,oBAAT,EAA+BC,YAA/B,EAA6CC,WAA7C,QAAgE,+BAAhE;AACA,SAASC,YAAT,QAA6B,aAA7B;AACA,OAAOC,QAAP,MAAqB,YAArB;;;AAEA,MAAMC,KAAK,GAAG,MAAM;EAAA;;EAClB,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBV,QAAQ,CAAC,EAAD,CAApC;EACA,MAAMW,QAAQ,GAAGT,WAAW,EAA5B;EACA,MAAMU,QAAQ,GAAGX,WAAW,EAA5B;EAEAF,SAAS,CAAC,MAAM;IACdK,YAAY,GACTS,IADH,CACSC,IAAD,IAAUJ,SAAS,CAACI,IAAI,CAACL,MAAN,CAD3B,EAC0C;IAD1C,CAEGM,KAFH,CAEUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFlB;EAGD,CAJQ,EAIN,EAJM,CAAT;;EAMA,MAAMG,aAAa,GAAIL,IAAD,IAAU;IAC9BG,OAAO,CAACC,GAAR,CAAYJ,IAAZ;IACAF,QAAQ,CAACN,YAAY,CAACc,KAAb,EAAD,CAAR;IACAC,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCR,IAAI,CAACS,EAArC;IACAF,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BR,IAAI,CAACU,KAAnC;IACAb,QAAQ,CAAC,GAAD,CAAR;EACD,CAND;;EAQA,MAAMc,OAAO,GAAIX,IAAD,IAAU;IACxBG,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBJ,IAArB;IACAX,oBAAoB,CAACW,IAAI,CAACY,MAAN,CAApB,CACGb,IADH,CACQM,aADR,EAEGJ,KAFH,CAEUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFlB;EAGD,CALD;;EAOA,MAAMW,YAAY,GAAIJ,EAAD,IAAQ;IAC3BlB,WAAW,CAACkB,EAAD,CAAX,CACGV,IADH,CACQ,MAAMH,SAAS,CAAEkB,UAAD,IAAgBA,UAAU,CAACC,MAAX,CAAmBC,KAAD,IAAWA,KAAK,CAACC,GAAN,KAAcR,EAA3C,CAAjB,CADvB,EACyF;IADzF,CAEGR,KAFH,CAEUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFlB;EAGD,CAJD;;EAMA,oBACE;IAAA,wBACE,QAAC,QAAD;MAAU,QAAQ,EAAES,OAApB;MAA6B,OAAO,EAAE;IAAtC;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF,eAGE;MAAA,UACGhB,MAAM,CAACuB,GAAP,CAAYF,KAAD,iBACV;QAAA,WACGA,KAAK,CAACG,KADT,eAEE;UAAQ,SAAS,EAAC,iBAAlB;UAAoC,OAAO,EAAE,MAAMN,YAAY,CAACG,KAAK,CAACC,GAAP,CAA/D;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA,GAASD,KAAK,CAACC,GAAf;QAAA;QAAA;QAAA;MAAA,QADD;IADH;MAAA;MAAA;MAAA;IAAA,QAHF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAcD,CA9CD;;GAAMvB,K;UAEaN,W,EACAD,W;;;KAHbO,K;AAgDN,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}