{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jasvinder Kaur\\\\OneDrive\\\\Desktop\\\\final\\\\movie-booking-project\\\\movie-booking-project-frontend\\\\src\\\\components\\\\Auth\\\\Admin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { sendAdminAuthRequest, deleteMovieRequest, fetchMovies } from \"../../api-helpers/api-helpers\";\nimport { adminActions } from \"../../store\";\nimport AuthForm from \"./AuthForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Admin = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [movies, setMovies] = useState([]);\n  useEffect(() => {\n    fetchMovies().then(data => setMovies(data)).catch(err => console.log(err));\n  }, []);\n\n  const onResReceived = data => {\n    console.log(data);\n    dispatch(adminActions.login());\n    localStorage.setItem(\"adminId\", data.id);\n    localStorage.setItem(\"token\", data.token);\n    navigate(\"/\");\n  };\n\n  const getData = data => {\n    console.log(\"Admin\", data);\n    sendAdminAuthRequest(data.inputs).then(onResReceived).catch(err => console.log(err));\n  };\n\n  const handleDelete = movieId => {\n    deleteMovieRequest(movieId).then(() => {\n      setMovies(prevMovies => prevMovies.filter(movie => movie.id !== movieId));\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(AuthForm, {\n      onSubmit: getData,\n      isAdmin: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Movies List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: movies.map(movie => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [movie.title, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(movie.id),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 15\n          }, this)]\n        }, movie.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Admin, \"gPUds8FnpkmEpbBdvX36yaczmOA=\", false, function () {\n  return [useNavigate, useDispatch];\n});\n\n_c = Admin;\nexport default Admin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useNavigate","sendAdminAuthRequest","deleteMovieRequest","fetchMovies","adminActions","AuthForm","Admin","navigate","dispatch","movies","setMovies","then","data","catch","err","console","log","onResReceived","login","localStorage","setItem","id","token","getData","inputs","handleDelete","movieId","prevMovies","filter","movie","map","title"],"sources":["C:/Users/Jasvinder Kaur/OneDrive/Desktop/final/movie-booking-project/movie-booking-project-frontend/src/components/Auth/Admin.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { sendAdminAuthRequest, deleteMovieRequest, fetchMovies } from \"../../api-helpers/api-helpers\";\nimport { adminActions } from \"../../store\";\nimport AuthForm from \"./AuthForm\";\n\nconst Admin = () => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [movies, setMovies] = useState([]);\n\n  useEffect(() => {\n    fetchMovies().then((data) => setMovies(data)).catch((err) => console.log(err));\n  }, []);\n\n  const onResReceived = (data) => {\n    console.log(data);\n    dispatch(adminActions.login());\n    localStorage.setItem(\"adminId\", data.id);\n    localStorage.setItem(\"token\", data.token);\n    navigate(\"/\");\n  };\n\n  const getData = (data) => {\n    console.log(\"Admin\", data);\n    sendAdminAuthRequest(data.inputs)\n      .then(onResReceived)\n      .catch((err) => console.log(err));\n  };\n\n  const handleDelete = (movieId) => {\n    deleteMovieRequest(movieId)\n      .then(() => {\n        setMovies((prevMovies) => prevMovies.filter((movie) => movie.id !== movieId));\n      })\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <div>\n      <AuthForm onSubmit={getData} isAdmin={true} />\n      <div>\n        <h2>Movies List</h2>\n        <ul>\n          {movies.map((movie) => (\n            <li key={movie.id}>\n              {movie.title}\n              <button onClick={() => handleDelete(movie.id)}>Delete</button>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default Admin;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,oBAAT,EAA+BC,kBAA/B,EAAmDC,WAAnD,QAAsE,+BAAtE;AACA,SAASC,YAAT,QAA6B,aAA7B;AACA,OAAOC,QAAP,MAAqB,YAArB;;;AAEA,MAAMC,KAAK,GAAG,MAAM;EAAA;;EAClB,MAAMC,QAAQ,GAAGP,WAAW,EAA5B;EACA,MAAMQ,QAAQ,GAAGT,WAAW,EAA5B;EACA,MAAM,CAACU,MAAD,EAASC,SAAT,IAAsBb,QAAQ,CAAC,EAAD,CAApC;EAEAC,SAAS,CAAC,MAAM;IACdK,WAAW,GAAGQ,IAAd,CAAoBC,IAAD,IAAUF,SAAS,CAACE,IAAD,CAAtC,EAA8CC,KAA9C,CAAqDC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAA7D;EACD,CAFQ,EAEN,EAFM,CAAT;;EAIA,MAAMG,aAAa,GAAIL,IAAD,IAAU;IAC9BG,OAAO,CAACC,GAAR,CAAYJ,IAAZ;IACAJ,QAAQ,CAACJ,YAAY,CAACc,KAAb,EAAD,CAAR;IACAC,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCR,IAAI,CAACS,EAArC;IACAF,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BR,IAAI,CAACU,KAAnC;IACAf,QAAQ,CAAC,GAAD,CAAR;EACD,CAND;;EAQA,MAAMgB,OAAO,GAAIX,IAAD,IAAU;IACxBG,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBJ,IAArB;IACAX,oBAAoB,CAACW,IAAI,CAACY,MAAN,CAApB,CACGb,IADH,CACQM,aADR,EAEGJ,KAFH,CAEUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFlB;EAGD,CALD;;EAOA,MAAMW,YAAY,GAAIC,OAAD,IAAa;IAChCxB,kBAAkB,CAACwB,OAAD,CAAlB,CACGf,IADH,CACQ,MAAM;MACVD,SAAS,CAAEiB,UAAD,IAAgBA,UAAU,CAACC,MAAX,CAAmBC,KAAD,IAAWA,KAAK,CAACR,EAAN,KAAaK,OAA1C,CAAjB,CAAT;IACD,CAHH,EAIGb,KAJH,CAIUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAJlB;EAKD,CAND;;EAQA,oBACE;IAAA,wBACE,QAAC,QAAD;MAAU,QAAQ,EAAES,OAApB;MAA6B,OAAO,EAAE;IAAtC;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAA,wBACE;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAA,UACGd,MAAM,CAACqB,GAAP,CAAYD,KAAD,iBACV;UAAA,WACGA,KAAK,CAACE,KADT,eAEE;YAAQ,OAAO,EAAE,MAAMN,YAAY,CAACI,KAAK,CAACR,EAAP,CAAnC;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA,GAASQ,KAAK,CAACR,EAAf;UAAA;UAAA;UAAA;QAAA,QADD;MADH;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAgBD,CAhDD;;GAAMf,K;UACaN,W,EACAD,W;;;KAFbO,K;AAkDN,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}